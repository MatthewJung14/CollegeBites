<!DOCTYPE html>
<html>
  <head>
    <title>College Bites</title>
    <link rel="stylesheet" href="app/css/style.css">
  </head>
  <body>
    <div id="site">
    <h1>College Bites</h1>
    <p>Going to a football game? Visiting a friend? If you're traveling to a college town, make the most of the city. Explore top restaurants, museums, and attractions in the area.</p>
    <h2>Where are you visiting?</h2>
    <div class="select-box">
      <label for="city">University: </label>
      <br/>
      <select name="city" id="city">
        <option value="Philadelphia">University of Pennsylvania</option>
        <option value="Tuscon">University of Arizona</option>
        <option value="Tampa">University of Tampa</option>
        <option value="Nashville">Vanderbilt University</option>
        <option value="New Orleans">Tulane University</option>
        <option value="Saint Louis">Washington University in St. Louis</option>
        <option value="Santa Barbara">University of Calfornia Santa Barbara</option>
      </select>
    </div>
    <div class="select-box">
      <label for="sort_by">Sort By: </label>
      <br/>
      <select name="sort_by" id="sort_by">
        <option value="Popularity">Popularity</option>
        <option value="Stars"># of Stars</option>
      </select>
    </div>
    <div class="select-box">
      <label for="method">Sort Method: </label>
      <br/>
      <select name="method" id="method">
        <option value="merge">Merge Sort</option>
        <option value="quick">Quick Sort</option>
      </select>
    </div>
    <button class="button" onclick="searchClick()">Search</button>
  </div>
  <p id="result"></p>
  <!-- <a href="./restaurant.html">
    <div class="box">
      <h3>Coffee Shop</h3>
      <p><b>Hours: </b> M-F 9am-5pm</p>
    </div>
  </a>
  <div class="box">
    <h3>Coffee Shop</h3>
    <p><b>Hours: </b> M-F 9am-5pm</p>
  </div>
  <div class="box">
    <h3>Coffee Shop</h3>
    <p><b>Hours: </b> M-F 9am-5pm</p>
  </div> -->
  <script src="app/js/data.js"></script>
	<script src="app/js/script.js"></script>
  <script>
    function searchClick(){
       console.log("searchClick was clicked.");
       let myCity = document.getElementById("city").value;
       console.log(myCity);
       let filteredByCity = filterData(myCity); 
       console.log(filteredByCity);

       let sort = document.getElementById("sort_by").value;
       
       if (sort == "Stars"){
           mergeSortRating(filteredByCity);
           console.log("Sort by stars");
           console.log(filteredByCity);
       } else {
           quickSortPopularity(filteredByCity);
           console.log("Sort by popularity");
           console.log(filteredByCity);
       }
       
       let result = "<h2>Top 10 Results</h2>";
       for (let i = 0; i < 10; i++){
        let shopName = filteredByCity[i].name;

        let shopRating = filteredByCity[i].stars;
        let shopPopularity = filteredByCity[i].review_count;

        let hours = {}; 
        let hourTxt = "";
        hours = filteredByCity[i].hours;
        if (hours != undefined && hours != null) {
            for (let x in hours) {
              hourTxt += x + ': ' + hours[x] + "<br> ";
            }
            console.log('hourTxt: ' + hourTxt );
          }
        
        result += '<a href="./restaurant.html"><div class="box"><h3>' + 
          shopName + '</h3><p><b>Rating: </b>' + shopRating + 
            '</p><p><b>Popularity: </b>' + shopPopularity + '</p><p><b>Hours: </b><br> ' + 
            hourTxt +'</p></div></a>';
      }
      document.getElementById("result").innerHTML = result;
    }
  </script>
  </body>
</html>